<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Correlation Matrix | FLH Website</title>
    <link>http://localhost:57190/tags/correlation-matrix/</link>
      <atom:link href="http://localhost:57190/tags/correlation-matrix/index.xml" rel="self" type="application/rss+xml" />
    <description>Correlation Matrix</description>
    <generator>Hugo Blox Builder (https://hugoblox.com)</generator><language>en-us</language><lastBuildDate>Fri, 26 Oct 2018 00:00:00 +0000</lastBuildDate>
    <image>
      <url>http://localhost:57190/media/icon_hu_7c4bcaa7031a3f50.png</url>
      <title>Correlation Matrix</title>
      <link>http://localhost:57190/tags/correlation-matrix/</link>
    </image>
    
    <item>
      <title>ðŸ§  Difference between correlation and covariance matrices</title>
      <link>http://localhost:57190/post/2018-06-16-difference-between-variance-covariance-and-correlation-matrix/</link>
      <pubDate>Fri, 26 Oct 2018 00:00:00 +0000</pubDate>
      <guid>http://localhost:57190/post/2018-06-16-difference-between-variance-covariance-and-correlation-matrix/</guid>
      <description>&lt;h2 id=&#34;variancecovariance&#34;&gt;Variance/Covariance&lt;/h2&gt;
&lt;p&gt;To start off, the sample variance formula is:&lt;/p&gt;
$$s^2 = \frac{\sum_{i=1}^{n}(x_i - \overline{x})^2} {n - 1 }$$&lt;p&gt;First of all, $x - \overline{x}$ is a deviation score (deviation from
what? deviation from the mean). Summing the deviations will just get us
zero so the deviations are squared and then added together. The
numerator of this formula is then called the &lt;strong&gt;sum of squared
deviations&lt;/strong&gt; which is literally what it is. This is not yet what we
refer to as the variance (&lt;em&gt;s&lt;/em&gt;&lt;sup&gt;2&lt;/sup&gt;). We have to divide this by
&lt;em&gt;n&lt;/em&gt;â€…âˆ’â€…1 which is the sample degrees of freedom.&lt;/p&gt;
&lt;p&gt;If you have two variables, x and y, those two variables can covary. The
formula is similarâ€“ instead of squaring the deviation scores, the
product of the deviation scores of the two variables are used.&lt;/p&gt;
$$cov(x, y) = \frac{\sum_{i=1}^{n}(x_i - \overline{x})(y_i - \overline{y})} {n - 1 }$$&lt;p&gt;The numerator is also called the sum of &lt;strong&gt;cross products&lt;/strong&gt; (which is
what it is). Then dividing this by &lt;em&gt;n&lt;/em&gt;â€…âˆ’â€…1 is the &lt;strong&gt;covariance&lt;/strong&gt;. The
covariance of a variable with itself is also the &lt;strong&gt;variance&lt;/strong&gt; which
makes sense (instead of the cross product, you are multiplying the
deviance with itself or just squaring it).&lt;/p&gt;
$$cov(x, x) = s^2 = \frac{\sum_{i=1}^{n}(x_i - \overline{x})(x_i - \overline{x})} {n - 1 }$$&lt;p&gt;That is pretty useful to know. However, the covariance though is not
easy to interpret because it is dependent on the &lt;strong&gt;scale&lt;/strong&gt; of your
variables. For example, if you get the covariance of height and weightâ€“
one is measured in inches (or cm) and the other in pounds (or kg).
Hereâ€™s an example (not height or weight):&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;x &amp;lt;- c(12, 15, 20, 25, 30)
y &amp;lt;- c(2, 6, 8, 10, 12)
mean(x)

## [1] 20.4

mean(y)

## [1] 7.6

var(x)

## [1] 53.3

var(y)

## [1] 14.8

cov(x, y) #gets one covariance at a time. 

## [1] 27.2
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can put these two variables together in a data frame and estimate the
covariance from there.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;df &amp;lt;- data.frame(x, y)
cov(df) #same result

##      x    y
## x 53.3 27.2
## y 27.2 14.8
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;correlation&#34;&gt;Correlation&lt;/h2&gt;
&lt;p&gt;What then is the relationship with the correlation matrix? One way to
think about it is that the covariance matrix is a bit hard to interpret
(the covariances) because they are a mix of different units of measure.
A way we get around that is standardizing the measures by converting
them to z scores:&lt;/p&gt;
$$z-scores = \frac{(x_i - \overline{x})} {SD\_x  }$$&lt;p&gt;The scores then have a distribution with a M = 0 and SD = 1 (w/c also
means a variance of 1). NOTE: how we can access variables in the data
frame using the $ sign.&lt;/p&gt;
&lt;p&gt;We can convert by using:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zx &amp;lt;- ( (df$x) - mean(df$x) ) / sd(df$x)
zy &amp;lt;- ( (df$y) - mean(df$y) ) / sd(df$y)

zx

## [1] -1.15057698 -0.73965663 -0.05478938  0.63007787
## [5]  1.31494512

zy

## [1] -1.4556507 -0.4159002  0.1039750  0.6238503
## [5]  1.1437255
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;NOTE: in R, a function to convert raw scores to z scores is the &lt;code&gt;scale&lt;/code&gt;
function.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zx2 &amp;lt;- scale(df$x)
zy2 &amp;lt;- scale(df$y)
zx2

##             [,1]
## [1,] -1.15057698
## [2,] -0.73965663
## [3,] -0.05478938
## [4,]  0.63007787
## [5,]  1.31494512
## attr(,&amp;quot;scaled:center&amp;quot;)
## [1] 20.4
## attr(,&amp;quot;scaled:scale&amp;quot;)
## [1] 7.300685

zy2

##            [,1]
## [1,] -1.4556507
## [2,] -0.4159002
## [3,]  0.1039750
## [4,]  0.6238503
## [5,]  1.1437255
## attr(,&amp;quot;scaled:center&amp;quot;)
## [1] 7.6
## attr(,&amp;quot;scaled:scale&amp;quot;)
## [1] 3.847077
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;If you want to scale the whole dataset:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;zdf &amp;lt;- scale(df)
zdf

##                x          y
## [1,] -1.15057698 -1.4556507
## [2,] -0.73965663 -0.4159002
## [3,] -0.05478938  0.1039750
## [4,]  0.63007787  0.6238503
## [5,]  1.31494512  1.1437255
## attr(,&amp;quot;scaled:center&amp;quot;)
##    x    y 
## 20.4  7.6 
## attr(,&amp;quot;scaled:scale&amp;quot;)
##        x        y 
## 7.300685 3.847077
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;NOTE: These variables now have a mean of 0 and sd of 1 (also a variance
of 1).&lt;/p&gt;
&lt;p&gt;A one unit change is a one standard deviation change. NOTE: this is how
you interpret standardized beta coefficients in regression. These new
measures are now â€˜unitlessâ€™.&lt;/p&gt;
&lt;p&gt;If you get the covariance of the two standardized scores, that will be
the correlation (or r),&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;cov(zx, zy)

## [1] 0.9684438

### You can compare if we just get compute the correlation using the raw scores
cov(zdf)

##           x         y
## x 1.0000000 0.9684438
## y 0.9684438 1.0000000

cor(df)

##           x         y
## x 1.0000000 0.9684438
## y 0.9684438 1.0000000
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The result is the same. We can convert a covariance matrix into a
correlation matrix.&lt;/p&gt;
$$cor(x, y) = \frac{cov(x, y)} {sd(x) \times sd(y) }$$&lt;p&gt;You can take the variances from the covariance matrix (the diagonal) and
then take the square root and those will be the standard deviations.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;#check
cov(df)

##      x    y
## x 53.3 27.2
## y 27.2 14.8

sqrt(53.3) #see diagonal

## [1] 7.300685

sd(df$x)

## [1] 7.300685

sd(df$y)

## [1] 3.847077
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;So to convert the covariance of 27.2, we divide it by the product of
sd(x) and sd(y).&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;27.2 / (sd(df$x) * sd(df$y))

## [1] 0.9684438
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Think about it: Can you then convert a correlation matrix to a
covariance matrix if all you had is the correlation matrix?&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
